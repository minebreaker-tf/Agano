// IPMsgPacket.javaより
/*
    2.コマンドフォーマット（すべて文字列として表現）
     1) コマンド（フォーマットバージョン1）
	Ver(1) : Packet番号 : 自User名 : 自Host名 : Command番号 : 追加部
     2) 現在のコマンドフォーマットによるメッセージの送信文字列例
	"1:100:shirouzu:jupiter:32:Hello"
 */

/*
パケット番号は多分意味がない(重複防止?
ユーザー名は ユーザー名+公開鍵の指紋
ホスト名は普通にホスト名だろう
コマンドは16進数に変換するのだ!
224399360 = 0D 60 10 00 // 00は命令なし ブロードキャスト用?
224399361 = 0D 60 10 01 // 01はBR_ENTRY 参加要請?
0D6010ってなんだろう…

パケット番号がダブると、そのほかの部分が違っても無視される。

SENDでなにか不備があり、確認オプションがONだと応答の追加部に-1がはいって返ってくる。
ていうかソース読まないと駄目かなあCはいやだ

#define FILELIST_SEPARATOR	'\a'
#define HOSTLIST_SEPARATOR	'\a'
#define HOSTLIST_DUMMY		"\b"
\a ビープ音
\b バックスペース



パケットの解説
http://smart-pda.net/isourou/ipmsg/doc/ipmsg_protocol.html
 */

1:1465739438:minebreaker-<e6f61e4f6ef1e114>:WIN2016TP5:224399360:win_server_2016
UN:minebreaker-<e6f61e4f6ef1e114>
HN:WIN2016TP5
NN:win_server_2016
GN:

313A313436353733393433383A6D696E65627265616B65722D3C653666363165346636656631653131343E3A57494E323031365450353A3232343339393336303A77696E5F7365727665725F3230313600000A554E3A6D696E65627265616B65722D3C653666363165346636656631653131343E0A484E3A57494E323031365450350A4E4E3A77696E5F7365727665725F323031360A474E3A



1:1465739439:minebreaker-<e6f61e4f6ef1e114>:WIN2016TP5:224399361:win_server_2016
UN:minebreaker-<e6f61e4f6ef1e114>
HN:WIN2016TP5
NN:win_server_2016
GN:

313A313436353733393433393A6D696E65627265616B65722D3C653666363165346636656631653131343E3A57494E323031365450353A3232343339393336313A77696E5F7365727665725F3230313600000A554E3A6D696E65627265616B65722D3C653666363165346636656631653131343E0A484E3A57494E323031365450350A4E4E3A77696E5F7365727665725F323031360A474E3A



1:1465739444:minebreaker-<e6f61e4f6ef1e114>:WIN2016TP5:224399361:win_server_2016
UN:minebreaker-<e6f61e4f6ef1e114>
HN:WIN2016TP5
NN:win_server_20166 12
GN:

313A313436353733393434343A6D696E65627265616B65722D3C653666363165346636656631653131343E3A57494E323031365450353A3232343339393336313A77696E5F7365727665725F3230313600000A554E3A6D696E65627265616B65722D3C653666363165346636656631653131343E0A484E3A57494E323031365450350A4E4E3A77696E5F7365727665725F323031360A474E3A

ファイル添付あり
1:1478959588:minebreaker-tab-<02ba1c69dd2bf673>:MINEBREAKER-TAB:27263264:message 819961213:test.txt:c:582078dd:1:.
0000   31 3a 31 34 37 38 39 35 39 35 38 38 3a 6d 69 6e  1:1478959588:min
0010   65 62 72 65 61 6b 65 72 2d 74 61 62 2d 3c 30 32  ebreaker-tab-<02
0020   62 61 31 63 36 39 64 64 32 62 66 36 37 33 3e 3a  ba1c69dd2bf673>:
0030   4d 49 4e 45 42 52 45 41 4b 45 52 2d 54 41 42 3a  MINEBREAKER-TAB:
0040   32 37 32 36 33 32 36 34 3a 6d 65 73 73 61 67 65  27263264:message
0050   00 38 31 39 39 36 31 32 31 33 3a 74 65 73 74 2e  .819961213:test.
0060   74 78 74 3a 63 3a 35 38 32 30 37 38 64 64 3a 31  txt:c:582078dd:1
0070   3a 07                                            :.
     fileID:filename:size:mtime:fileattr[:extend-attr=val1
     [,val2...][:extend-attr2=...]]:\a[:]fileID...
     (なお、size, mtime, fileattr は hex で表現します。
      filenameに':'がある場合、"::"でエスケープします)

fileID:   27263264
filename: test.txt
size:     c (12)
mtime:    582078dd (‭1478523101‬)
fileattr: 1 (IPMSG_FILE_REGULAR)

読み取り専用隠しファイル
1:1478961365:minebreaker-tab-<02ba1c69dd2bf673>:MINEBREAKER-TAB:27263264: 171873011:test.txt:c:582078dd:101:.
0000   31 3a 31 34 37 38 39 36 31 33 36 35 3a 6d 69 6e  1:1478961365:min
0010   65 62 72 65 61 6b 65 72 2d 74 61 62 2d 3c 30 32  ebreaker-tab-<02
0020   62 61 31 63 36 39 64 64 32 62 66 36 37 33 3e 3a  ba1c69dd2bf673>:
0030   4d 49 4e 45 42 52 45 41 4b 45 52 2d 54 41 42 3a  MINEBREAKER-TAB:
0040   32 37 32 36 33 32 36 34 3a 00 31 37 31 38 37 33  27263264:.171873
0050   30 31 31 3a 74 65 73 74 2e 74 78 74 3a 63 3a 35  011:test.txt:c:5
0060   38 32 30 37 38 64 64 3a 31 30 31 3a 07           82078dd:101:.

attr: 101 (0001 0000 0001)
IPMSG_FILE_REGULAR
IPMSG_FILE_RONLYOPT
隠し属性がなぜか無視されてる...

ディレクトリ
0000   31 3a 31 34 37 38 39 36 31 35 37 39 3a 6d 69 6e  1:1478961579:min
0010   65 62 72 65 61 6b 65 72 2d 74 61 62 2d 3c 30 32  ebreaker-tab-<02
0020   62 61 31 63 36 39 64 64 32 62 66 36 37 33 3e 3a  ba1c69dd2bf673>:
0030   4d 49 4e 45 42 52 45 41 4b 45 52 2d 54 41 42 3a  MINEBREAKER-TAB:
0040   32 37 32 36 33 32 36 34 3a 00 39 37 34 31 32 33  27263264:.974123
0050   31 31 35 3a 64 69 72 65 63 74 6f 72 79 3a 30 3a  115:directory:0:
0060   35 38 32 37 32 39 39 38 3a 32 3a 07              58272998:2:.

attr: 2 (IPMSG_FILE_DIR)
中のファイルは...?
